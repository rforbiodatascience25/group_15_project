---
title: "02_clean"
format:
  html:
    embed-resources: true
editor: visual
execute: 
  echo: true
  message: false
  warning: false
---

### Load the Dataset

```{r load_libraries}
library(tidyverse)
```

### Changing the column names

```{r}
kidney_renamed <- kidney_disease %>%
  rename(
    id = id,
    age = age,
    blood_pressure = bp,
    specific_gravity = sg,
    albumin = al,
    sugar = su,
    red_blood_cells = rbc,
    pus_cells = pc,
    pus_cell_clumps = pcc,
    bacteria = ba,
    blood_glucose_random = bgr,
    blood_urea = bu,
    serum_creatinine = sc,
    sodium = sod,
    potassium = pot,
    hemoglobin = hemo,
    packed_cell_volume = pcv,
    white_blood_cell_count = wc,
    red_blood_cell_count = rc,
    hypertension = htn,
    diabetes_mellitus = dm,
    coronary_artery_disease = cad,
    appetite = appet,
    pedal_edema = pe,
    anemia = ane,
    classification = classification
  )
summary(kidney_renamed)
```

### Column types fixed

In the raw data, some columns with numeric observations were classified as characters; these are changed into the numeric type.

```{r}
kidney_clean <- kidney_renamed %>%
  mutate(
    packed_cell_volume = as.numeric(packed_cell_volume),
    white_blood_cell_count = as.numeric(white_blood_cell_count),
    red_blood_cell_count = as.numeric(red_blood_cell_count),
    across(where(is.character), as.factor)
  )
```

### NA's

The missing values are going to be handled in separate analysis individually. The percentage of NAs in each column is summarized here:

```{r}
nas<-kidney_clean %>% 
     summarise(across(everything(), ~mean(is.na(.)) * 100))
view(nas)
```

### Save clean data in a new file

```{r}
write_csv(kidney_clean, "../data/02_dat_clean.csv")
```
